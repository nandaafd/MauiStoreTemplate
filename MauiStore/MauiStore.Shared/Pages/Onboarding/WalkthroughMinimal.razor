@page "/walkthrough-minimal"
@attribute [Microsoft.AspNetCore.Authorization.AllowAnonymous]
@inherits LayoutComponentBase

<style>

    .copyright-footer {
        display: none;
    }

    .wk-container {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }

    .btn-gradient-bg {
        background-color: #EC3679;
        background-image: linear-gradient(315deg, #EC3679 0%, rgba(38,132,255,1) 80%);
        color: #fff;
        border: 0px solid transparent;
    }

    .bounceIn {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: bounceIn;
        animation-fill-mode: forwards;
    }

    .bounceOut {
        animation-duration: 0.5s;
        animation-name: bounceOut;
        animation-fill-mode: forwards;
    }

    .backInDown {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: backInDown;
        animation-fill-mode: forwards;
    }

    .backOutDown {
        animation-duration: 0.5s;
        animation-name: backOutDown;
        animation-fill-mode: forwards;
    }

    .rotateIn {
        opacity: 0;
        animation-delay: 0.5s;
        animation-duration: 0.5s;
        animation-name: rotateIn;
        animation-fill-mode: forwards;
    }

    .rotateOut {
        animation-duration: 0.5s;
        animation-name: rotateOut;
        animation-fill-mode: forwards;
    }
</style>

<MudCarousel @ref="_carousel" Class="wk-container" Style="width: 100%; height: 100%;" ShowArrows="false" ShowBullets="false" AutoCycle="false" TData="object">
    <MudCarouselItem Transition="Transition.Slide">
        <MudCard Outlined="false" Square="true" Class="wk-container border-0 d-flex flex-column justify-center">
            <MudCardContent Class="pa-5 d-flex flex-column justify-space-between" Style="height:100%; width:100%;">
                <div></div>
                <div class="d-flex flex-column">
                    <MudIcon Color="Color.Success" Icon="fas fa-check-circle" Class="align-self-center fa-7x rotateIn"></MudIcon>
                    <MudText Typo="Typo.h5" Align="Align.Center" Class="mt-5 backInDown" Style="font-weight: 700;">
                        Welcome
                    </MudText>
                    <MudText Typo="Typo.body1" Align="Align.Center" Class="mt-5" Style="font-weight: 400;">
                        To a new world of posibilities,<br> welcome to MauiStore.
                    </MudText>
                </div>
                <MudButton Class="mb-15 btn-gradient-bg rounded-lg" Color="Color.Default" OnClick="NextAsync" FullWidth="true" Variant="Variant.Outlined" Size="Size.Large"> Next </MudButton>
            </MudCardContent>
        </MudCard>
    </MudCarouselItem>

    <MudCarouselItem Transition="Transition.Slide">
        <MudCard Outlined="false" Square="true" Class="wk-container border-0 d-flex flex-column justify-center">
            <MudCardContent Class="pa-5 d-flex flex-column justify-space-between" Style="height:100%; width:100%;">
                <div></div>
                <div class="d-flex flex-column">
                    <MudIcon Color="Color.Warning" Icon="fas fa-exclamation-triangle" Class="align-self-center fa-7x rotateIn"></MudIcon>
                    <MudText Typo="Typo.h5" Align="Align.Center" Class="mt-5 backInDown" Style="font-weight: 700;">
                        Save Time
                    </MudText>
                    <MudText Typo="Typo.body1" Align="Align.Center" Class="mt-5" Style="font-weight: 400;">
                        Save countless hours of UI design.<br>Focus on your app functions.
                    </MudText>
                </div>
                <MudButton Class="mb-15 btn-gradient-bg rounded-lg" Color="Color.Default" OnClick="NextAsync" FullWidth="true" Variant="Variant.Outlined" Size="Size.Large"> Next </MudButton>
            </MudCardContent>
        </MudCard>
    </MudCarouselItem>

    <MudCarouselItem Transition="Transition.Slide">
        <MudCard Outlined="false" Square="true" Class="wk-container border-0 d-flex flex-column justify-center">
            <MudCardContent Class="pa-5 d-flex flex-column justify-space-between" Style="height:100%; width:100%;">
                <div></div>
                <div class="d-flex flex-column">
                    <MudIcon Color="Color.Error" Icon="fas fa-exclamation-circle" Class="align-self-center fa-7x rotateIn"></MudIcon>
                    <MudText Typo="Typo.h5" Align="Align.Center" Class="mt-5 backInDown" Style="font-weight: 700;">
                        Learn
                    </MudText>
                    <MudText Typo="Typo.body1" Align="Align.Center" Class="mt-5" Style="font-weight: 400;">
                        Learn while you work. <br>Tons of examples for you to explore.
                    </MudText>
                </div>
                <MudButton Class="mb-15 btn-gradient-bg rounded-lg" Color="Color.Default" OnClick="FinishAsync" FullWidth="true" Variant="Variant.Outlined" Size="Size.Large"> FINISH! </MudButton>
            </MudCardContent>
        </MudCard>
    </MudCarouselItem>
</MudCarousel>

@code{
    private MudCarousel<object> _carousel;

    private async Task NextAsync()
    {
        _carousel.Next();
    }

    private async Task FinishAsync()
    {
        //Parent.IsFirstVisit = !Parent.IsFirstVisit;
        //await ClientPreferences.ChangeFirstVisitAsync(Parent.IsFirstVisit);
        await InvokeAsync(StateHasChanged);
        _navigationManager.NavigateTo("/onboarding-index");
    }
}
